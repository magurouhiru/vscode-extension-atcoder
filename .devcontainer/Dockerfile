ARG NODEJS_VERSION

# 公式イメージを使用
FROM node:${NODEJS_VERSION}-slim

ARG NODEJS_ANALYZER_VERSION
ARG NODEJS_USERNAME
ARG NODEJS_USER_UID
ARG NODEJS_USER_GID
ARG NODEJS_WORKDIR_NAME
ARG NODEJS_WORKDIR=/home/${NODEJS_USERNAME}/${NODEJS_WORKDIR_NAME}

RUN apt-get update \
    && apt-get upgrade -y \
    && apt-get install -y git \
    && groupadd --gid ${NODEJS_USER_GID} ${NODEJS_USERNAME} \
    && useradd --uid ${NODEJS_USER_UID} --gid ${NODEJS_USER_GID} -m ${NODEJS_USERNAME} \
    && mkdir ${NODEJS_WORKDIR} \
    && chown -R ${NODEJS_USERNAME}:${NODEJS_USERNAME} /home/${NODEJS_USERNAME}
